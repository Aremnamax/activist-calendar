Ты — senior fullstack веб-разработчик с опытом проектирования production-систем для университетов и корпоративных платформ. Ты проектируешь масштабируемые, поддерживаемые и безопасные веб-приложения.
Общая задача проекта
Необходимо разработать веб-приложение календаря мероприятий для университетской профсоюзной платформы «Личный кабинет активиста».
Цель системы:
централизовать планирование мероприятий,
устранить конфликты по времени,
обеспечить прозрачный процесс подачи и модерации мероприятий,
предоставить удобный визуальный календарь для студентов и организаторов.
Приложение должно быть адаптивным, работать на всех устройствах (мобильный телефон, планшет, ноутбук, ПК) и использовать современные практики веб-разработки.
Архитектура: Монолит с API-backend (NestJS) и SPA-frontend (Next.js), для динамичного UI без перезагрузок и реал-тайм уведомлений via WebSockets.
Выбор технологического стека
Оптимальный стек выбран с учетом простоты поддержки, понятной архитектуры, широкого сообщества и удобства расширения:
Backend: 
NestJS (Node.js/TypeScript) — модульный фреймворк с Dependency Injection, отличный для API, RBAC и масштаба; сообщество Node.js огромное, производительность высокая для уведомлений.
Frontend: 
Next.js (React/TypeScript) + Tailwind CSS — SPA с SSR для быстрой загрузки, компоненты для модалок/форм; 
Tailwind для адаптивных стилей и цветов подразделений.
Календарь: 
React Big Calendar или FullCalendar с React-адаптером — кастомизация видов (месяц/неделя/день), фильтров (метки/подразделения), цветов и предупреждений о конфликтах.
База данных: 
PostgreSQL — реляционная для строгих связей (миграции с TypeORM), транзакций в lifecycle событий.
Уведомления: 
Nodemailer (email) + Telegraf (Telegram Bot API) + Socket.io (
реал
-
тайм
 
для
 
статусов
 
заявок
).
Обоснование: 
NestJS + Next.js — современный монолит с SPA, проще масштабировать чем Laravel (нет PHP-ограничений), лучше для реал-тайм (WebSockets). Сообщество React/Node огромное, деплой на Vercel/Render бесплатный.
Пользовательские роли и права доступа
Администратор:
видит все мероприятия и заявки,
одобряет / отклоняет мероприятия,
оставляет комментарии
 (отправляет заявку на доработку)
,
видит полную историю изменений,
контролирует действия организаторов.
Организатор:
подаёт заявки на мероприятия,
редактирует свои мероприятия (через модерацию),
видит статус и комментарии администратора
,
может дорабатывать и изменять свои заявки, но с подтверждением администраторов.
Активист (участник):
просматривает календарь,
подписывается на мероприятия,
фильтрует события в календаре для себя,
получает уведомления.
Используй ролевую модель доступа (RBAC).
Если роль выше, то она имеет все предыдущие возможности также.
Аутентификация и регистрация
Страница регистрации:
регистрация по электронной почте,
обязательные поля: email, пароль, ник
подтверждение email (можно реализовать позже, но архитектура должна позволять),
пароль хранится только в захешированном виде.
Страница входа:
авторизация по email + пароль,
после входа пользователь попадает в личный кабинет.
После входа пользователь видит:
ник / email,
свою роль (администратор / организатор / активист),
быстрые действия, зависящие от роли:
администратор - «Заявки на мероприятия»,
организатор - «Подать мероприятие»,
активист - «Мои мероприятия».
Основная страница с календарём
Визуальная, функциональная логика 
и UX основаны на календаре приложения TickTick, но:
должна соблюдаться именно функциональность просмотра по дням, неделям, месяцам
отображение каких-либо событий, чтобы было красиво с разными цветами и так далее
функция с метками, чтобы можно было потом фильтровать (например, хоррор мероприятия, образовательные лекции и тд)
соответственно фильтрация рабочая по меткам, по подразделениям и тд
Представления календаря:
месяц, неделя, день, список (опционально).
Интеграция с React Big Calendar для видов, фильтров (метки/подразделения с цветами) и предупреждений о конфликтах (API-check на overlaps).
Подразделения и цветовая система
В системе существует:
1
5
 основных подразделений
, 
каждое имеет свой уникальный цвет
:
ПРОФ.
event
 (цвет: 
#
ffe719
)
ПРОФ.life
 
(цвет: 
#
188184
)
ПРОФ.ГИ
 
(цвет: 
#
ec9a36
)
ПРОФ.ИБС
и
Б
 
(цвет: 
#
f7bffc
)
ПРОФ.ИКНК
 
(цвет: 
#
9489bd
)
ПРОФ.ИММ
и
Т
 
(цвет: 
#
27262a
)
ПРОФ.ИПМЭ
и
Т
 
(цвет: 
#
6378ba
)
ПРОФ.ИСИ
 
(цвет: 
#
1faebd
)
ПРОФ.ИСПО
 
(цвет: 
#
a6c90a
)
ПРОФ.ИЭ
 
(цвет: 
#
eb5620
)
ПРОФ.ИЭ
и
Т
 
(цвет: 
#
70a4d6
)
ПРОФ.ФизМех
 
(цвет: 
#
1b3663
)
ПРОФ
 
(цвет: 
#
11734b
)
Супер Культорги
 
(цвет: 
#
00157d
)
ОИ Адаптеры
 
(цвет: 
#
013425
)
подразделение «Остальные»
 
всегда выделяется цветом
 #
bababa
,
Цвет подразделения:
используется в календаре,
используется в карточке мероприятия,
используется в фильтрации.
Заявка на создание мероприятия
Кто может подавать
администратор,
организатор.
Реализация
кнопка «Подать мероприятие»
 под
 календарём,
открывается модальное окно.
Поля формы
название
 мероприятия: просто текстовое поле
,
дата
 проведения: 
сначала выбираешь 1 день или несколько, потом высвечивается маленький календарик, где ты нажимаешь на одну дату если один день или дату начала и окончания, если несколько дней (
ДД.ММ.ГГГГ или ДД.ММ.ГГГГ–ДД.ММ.ГГГГ
, 
если диапазон > 1 дня => многодневное
)
,
 также важно, что если в выбранный день есть какой-
то мероприятие, то выводится небольшое предупреждение ниже желтым цветом, что в этот день уже у кого-то есть мероприятие.
время начала и окончания
: как два поля рядом (
ЧЧ:ММ–ЧЧ:ММ
, 
начало ≤ конца если событие однодневное
)
,
место проведения
: текстовое поле
,
формат: 
Кнопки: «Открытое
 мероприятие
» / «Закрытое
 мероприятие
»
подразделение
: это кнопки, на которые можно нажать или есть подразделения нет в списке, то вписать самому в поле «Другое»
,
Лимит участников: Число >0 или «Без ограничений» (
Уточнение
 “Есть ли ограничение по числу участников?”, кнопки “Да”, “Нет”. “Нет” => «Без ограничений» в заявку.
 
“Да” => “Сколько?” => Число в заявку)
описание
: большое текстовое поле
ссылка на пост (заполнение не обязательно),
ссылка на регистрацию (заполнение не обязательно),
ссылка на ответственного (обязательно)
,
повторяется: мероприятие может 
повторяться
 ежедневно, еженедельно, ежемесячно или с выбором своего промежутка, как в 
TickTick
.
 (заполняется не обязательно)
метка: развлекательное, образовательное, мастер-класс, хоррор, квест, настольные игры и тд.
Снизу есть кнопка 
«Посмотреть предпросмотр»
 
и «Отправить заявку»
, если нажать
 на 
«Посмотреть предпросмотр»
, то 
формируется общая карточка мероприятия и высвечивается так же, как всплывающее окно с кнопками «Изменить» и «Отправить заявку».
 Если нажимается кнопка «Изменить», то дается возможность изменить какие-то поля, 
то есть, по сути,
 предыдущая форма, если нажимается кнопка «Отправить заявку», то заявка уходит на модерацию к администратору.
После отправки
 у организатора
:
организатор снова видит календарь
мероприятие 
не отображается в календаре до одобрения 
администратора
.
Рядом с кнопкой «Подать мероприятие» есть кнопка «Мои заявки», если туда нажать, то можно посмотреть статус всех заявок, которые ты 
подавал, а также туда приходят комментарии по заявкам от администраторов.
Если только отправили заявку, то 
мероприятие получает статус 
«На рассмотрении»
,
Если администратор одобряет заявку, то приходит сообщение «Заявка одобрена» и статус заявки «Одобрено»
, мероприятие появляется в календаре
.
Если администратор отклоняет заявку, то приходит сообщение «Заявка отклонена» и комментарий от администратора с причиной отказа, статус заявки «Отклонено».
Если администратор присылает комментарии по заявке, то можно нажать на кнопку «Редактировать заявку», появляется всплывающее окно
, где можно редактировать все поля. После редактирования по новой отправляется заявка администратору через кнопку «Отправить заявку».
После отправки у
 администраторов
:
Администратору приходит уведомление на почту и на сайте, что кто-то отправил заявку на мероприятие.
У администратора рядом с кнопкой «Подать мероприятие» есть кнопка «Все заявки», там списком написаны мероприятия, которые 
подаются и их статусы. Можно одобрять мероприятия, отклонять или давать комментарии по заявке.
Если было предупреждение о пересечении дней мероприятий, то это также помечается на заявке.
Если нажимаешь кнопку «Одобрить», то статус заявки переходит в «Одобрено» и организатору приходит сообщение об одобрении заявки.
Если нажимаешь кнопку «Отклонить», то появляется поле куда администратор пишет причину отказа и статус заявки переходит в «Отклонено», организатору приходит сообщение об отклонении заявки.
Если нажимаешь кнопку «Дать комментарий», то появляется поле куда администратор пишет комментарий по заявке и статус заявки переходит в «Редактируется», организатору приходит сообщение с комментариями от администратора. Организатор редактирует свою заявку и снова отправляет ее администратору на проверку.
Модель жизненного цикла мероприятия
Участники жизненного цикла
В жизненном цикле участвуют следующие роли:
Организатор
 — инициирует создание и изменение мероприятия;
Администратор
 — принимает решения о публикации и изменениях;
Система
 — автоматически отслеживает сроки и статусы.
1. 
Состояния заявки на мероприятие (Event Request)
1
.1. «Черновик»
Описание:
Мероприятие создано организатором, но ещё не отправлено на рассмотрение.
Допустимые действия:
редактирование данных,
удаление черновика,
отправка на модерацию.
Переходы:
→ «На рассмотрении»
1
.2. «На рассмотрении»
Описание:
Заявка отправлена администратору и ожидает принятия решения.
Допустимые действия:
просмотр администратором,
добавление комментария администратором.
Переходы:
→ «Одобрено»
→ «Отклонено»
→ «Требует доработки»
1
.3. «Требует доработки»
Описание:
Администратор указал замечания, которые необходимо исправить организатору.
Допустимые действия:
редактирование данных организатором,
повторная отправка на модерацию.
Переходы:
→ «На рассмотрении»
1
.4. «Отклонено»
Описание:
Заявка отклонена администратором с указанием причины.
Допустимые действия:
просмотр причины отказа,
создание новой заявки на основе отклонённой.
Переходы:
финальное состояние для заявки.
1
.5. «Одобрено»
Описание:
Заявка одобрена администратором.
Последствия:
на её основе создаётся активное мероприятие,
мероприятие публикуется в календаре.
Переходы:
→ «Запланировано» (состояние мероприятия)
2. Состояния мероприятия (Event)
После одобрения заявка трансформируется в мероприятие, которое имеет собственный жизненный цикл.
2
.1. «Запланировано»
Описание:
Мероприятие опубликовано в календаре и ожидает наступления даты проведения.
Допустимые действия:
просмотр пользователями,
подписка пользователей,
инициирование изменений организатором (через модерацию).
Переходы:
→ «Активно»
→ «Отменено»
2
.2. «Активно»
Описание:
Наступил день проведения мероприятия.
Допустимые действия:
просмотр информации,
отправка напоминаний пользователям.
Переходы:
→ «Завершено»
→ «Отменено»
2
.3. «Завершено»
Описание:
Мероприятие завершилось по времени.
Допустимые действия:
только просмотр информации,
доступ к истории изменений (для администратора).
Переходы:
финальное состояние.
2
.4. «Отменено»
Описание:
Мероприятие отменено по решению администратора.
Допустимые действия:
уведомление подписанных пользователей,
просмотр причины отмены.
Переходы:
финальное состояние.
3
. Жизненный цикл изменений мероприятия
3
.1. Инициирование изменения
Организатор может инициировать:
изменение даты,
изменение времени,
изменение описания,
изменение места проведения.
При этом:
создаётся 
запрос на изменение
,
текущее мероприятие остаётся без изменений до решения администратора.
3
.2. Рассмотрение изменения
Администратор:
просматривает изменения,
сравнивает старую и новую версии,
принимает решение.
Переходы:
→ «Изменение одобрено»
→ «Изменение отклонено»
3
.3. Применение изменения
В случае одобрения:
данные мероприятия обновляются,
фиксируется запись в журнале изменений,
пользователи получают уведомления.
4
. Автоматические переходы состояний
Система автоматически:
переводит мероприятие в состояние «Активно» при наступлении даты;
переводит мероприятие в состояние «Завершено» по окончании времени;
отправляет уведомления подписчикам согласно расписанию.
Подписка и уведомления
Подписка
Можно нажать на любое мероприятие из календаря и посмотреть его карточку во всплывающем окне. 
В этом окне содержится вся информация по этому мероприятию, которую заполнял организатор.
Снизу на этой карточке есть кнопка «Подписаться на мероприятие». Если на нее нажать, то будут приходить уведомления на почту с напоминанием о мероприятии за неделю, 3 дня и 1 день. Также в лк на странице с личной информацией будут отобраться «Ваши мероприятия».
Л
юбой пользователь может подписаться на мероприятие
 из календаря.
История изменений
Любое действие организатора
 со своими заявками
:
изменение даты,
изменение описания,
перенос мероприятия
Всё должно проходить через администратора – что-то поменяли, тогда это отправляется администратору на модерацию, и он снова одобряет, отклоняет или дает комментарий 
по этому конкретному изменению в заявке.
Вся история видна как выпадающий список администратору со всеми заявками и организатору с его заявками. 
Серверная архитектура
Используй модульную архитектуру NestJS (аналог MVC): модули группируют фичи, контроллеры — API endpoints, сервисы — бизнес-логику, entities — модели.
Раздели
:
Модули
: AuthModule, EventModule, NotificationModule 
и
 
т
.
д
.
Контроллеры
: REST API (e.g., POST /requests 
для
 
подачи
, PATCH /moderate 
для
 
модерации
).
Бизнес
-
логику
 (
сервисы
): EventService 
для
 lifecycle, NotificationService 
для
 email/Telegram/WS.
Модели (entities): С TypeORM для миграций/связей.
Политики доступа: Guards для RBAC (роли проверяются на endpoints).
Добавь WebSockets (Socket.io) для реал-тайм уведомлений.
Основные сущности БД
User (id, email, passwordHash, nickname, roleId, isVerified)
Role (id, name: enum 'admin'/'organizer'/'activist')
Event (id, title, dateStart, dateEnd, timeStart, timeEnd, place, format: enum 'open'/'closed', departmentId, labels: array, limitParticipants: number/null, description, postLink, regLink, responsibleLink, repeat: json, status: enum 'planned'/'active'/'completed'/'canceled', requestId)
EventRequest (id, eventId, status: enum 'draft'/'pending'/'needsWork'/'rejected'/'approved', comments: text, organizerId)
EventChangeLog (id, eventId, changes: json {field: {old, new}}, timestamp, userId)
Department (id, name, color: string)
Subscription (id, userId, eventId)
Notification (id, userId, type: enum 'reminder'/'approval'/'rejection', message, sentAt)
Используй
 TypeORM 
для
 
миграций
 (
авто
 
или
 
ручные
), 
внешние
 
ключи
 (relations: e.g., User hasMany EventRequest), 
понятные
 
связи
 (OneToMany/ManyToOne). 
Enum для статусов.
Используй:
миграции,
внешние ключи,
понятные связи.
Требования к коду
чистая структура,
читаемые имена,
отсутствие хардкода,
готовность к масштабированию,
комментарии в сложных местах
Используй TypeScript для типизации, Zod для валидации форм/API, BullMQ для фоновых задач (уведомления, cron для lifecycle). 
Хардкод (цвета подразделений) в конфиге (e.g., constants.ts). 
Для масштаба: Redis кэш, horizontal scaling.
Границы системы
Общие положения
Разрабатываемая система предназначена исключительно для централизованного планирования, отображения и модерации мероприятий в рамках университетской среды.
Система не является универсальной платформой управления мероприятиями, а реализует ограниченный, целенаправленный функционал, соответствующий задачам учебного проекта и реального внедрения в вузе.
Функциональные ограничения
Система 
НЕ должна реализовывать
 следующие функции:
Коммуникационные функции
встроенные чаты между пользователями;
личные сообщения;
групповые обсуждения;
комментарии пользователей под мероприятиями;
форумы и доски объявлений.
Финансовые и коммерческие функции
оплату участия в мероприятиях;
учёт денежных средств;
интеграцию с платёжными системами;
билеты, чеки, квитанции.
Функции управления участниками
ограничение количества участников;
автоматическое формирование списков присутствующих;
контроль посещаемости;
выдачу сертификатов участия.
Ограничения пользовательского интерфейса
Система 
не должна
:
использовать сложные анимации;
перегружать интерфейс декоративными элементами;
реализовывать индивидуальные темы оформления для пользователей.
Нефункциональные требования
Т
ребования к производительности
:
Время первичной загрузки основной страницы с календарём не должно превышать 3 секунд при стандартном интернет-соединении.
Время отклика сервера на основные операции:
загрузка списка мероприятий,
подача заявки на мероприятие,
одобрение или отклонение заявки
не должно превышать 1 секунды при нормальной нагрузке.
Система должна корректно работать при одновременной активности не менее 100 пользователей без деградации пользовательского интерфейса.
Отрисовка календаря должна оставаться стабильной при количестве мероприятий не менее 500 записей в базе данных.
Требования к надёжности и отказоустойчивости
Система должна обеспечивать сохранность данных при:
перезагрузке сервера,
сбоях сетевого соединения,
некорректном завершении пользовательской сессии.
Критически важные операции (создание заявки, модерация, изменение мероприятия) должны выполняться в рамках 
транзакций базы данных
.
В случае ошибки серверной части пользователь должен получать корректное уведомление без раскрытия внутренней информации системы.
Требования к безопасности
Все пароли пользователей должны храниться 
исключительно в зашифрованном виде
 с использованием современных алгоритмов хеширования.
Система должна быть защищена от:
SQL-инъекций,
XSS-атак,
CSRF-атак,
несанкционированного доступа к данным.
Разграничение доступа к функционалу должно осуществляться на основе:
ролей пользователей,
политик доступа на серверной стороне.
Все действия, связанные с модерацией мероприятий и изменением данных, должны быть доступны только авторизованным пользователям с соответствующими правами.
Требования к удобству использования (Usability)
Интерфейс должен быть интуитивно понятным и не требовать обучения для базовых сценариев использования.
Все основные действия (просмотр календаря, подача мероприятия, модерация) должны выполняться 
не более чем за 2–3 пользовательских шага
.
Цветовая индикация мероприятий должна быть:
визуально различимой,
единообразной на всех страницах,
понятной без дополнительного пояснения.
Интерфейс не должен быть перегружен второстепенными элементами.
Требования к адаптивности и кроссплатформенности
Веб-приложение должно корректно отображаться и функционировать на:
смартфонах,
планшетах,
ноутбуках,
стационарных компьютерах.
Использование браузера не должно накладывать ограничений:
поддержка актуальных версий Chrome, Firefox, Edge, Safari.
Порядок генерации кода
Генерируй проект поэтапно:
Проектирование базы данных (entities с TypeORM, миграции)
Аутентификация (AuthModule с JWT, регистрация/логин) · 
Роли и доступы (RBAC с Guards) · 
Календарь (React Big Calendar компонент, API для fetch событий) · 
Подача мероприятий (EventForm компонент, API для requests) · 
Модерация (Admin dashboard, moderate endpoints) · 
Подписки (Subscription entity, API/компонент для subscribe) · 
Уведомления
 (NotificationService 
с
 queues, Socket.io 
для
 realtime) · 
История изменений (ChangeLog entity, history API/компонент) · 
Инструкция по запуску (деплой на Vercel/Render, docker-compose)